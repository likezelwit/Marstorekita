<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Top Up Robux - Platform Resmi</title>
<script src="https://cdn.tailwindcss.com"></script>
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

<style>
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap");
body {
font-family: "Inter", sans-serif;
}
.gradient-bg {
background: linear-gradient(135deg, #00b4d8 0%, #0077b6 100%);
}
.robux-card {
transition: all 0.3s ease;
cursor: pointer;
}
.robux-card:hover {
transform: translateY(-5px);
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}
.robux-card.selected {
border: 3px solid #00b4d8;
background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
}
.payment-method {
transition: all 0.3s ease;
}
.payment-method:hover {
background-color: #f3f4f6;
}
.payment-method.selected {
background-color: #dbeafe;
border-color: #3b82f6;
}
@keyframes float {
0%, 100% {
transform: translateY(0px);
}
50% {
transform: translateY(-20px);
}
}
.float-animation {
animation: float 3s ease-in-out infinite;
}
.loading-spinner {
border: 3px solid #f3f3f3;
border-top: 3px solid #00b4d8;
border-radius: 50%;
width: 40px;
height: 40px;
animation: spin 1s linear infinite;
}
@keyframes spin {
0% {
transform: rotate(0deg);
}
100% {
transform: rotate(360deg);
}
}
.bonus-tag {
position: absolute;
top: -10px;
right: -10px;
background: #ff6b6b;
color: white;
font-size: 0.75rem;
font-weight: bold;
padding: 3px 8px;
border-radius: 12px;
transform: rotate(15deg);
}
.info-tooltip {
position: relative;
display: inline-block;
cursor: help;
}
.info-tooltip .tooltiptext {
visibility: hidden;
width: 250px;
background-color: #333;
color: #fff;
text-align: center;
border-radius: 6px;
padding: 8px;
position: absolute;
z-index: 1;
bottom: 125%;
left: 50%;
margin-left: -125px;
opacity: 0;
transition: opacity 0.3s;
font-size: 0.75rem;
}
.info-tooltip:hover .tooltiptext {
visibility: visible;
opacity: 1;
}
.country-select {
position: relative;
}
.country-dropdown {
position: absolute;
top: 100%;
left: 0;
right: 0;
background: white;
border: 1px solid #d1d5db;
border-top: none;
border-radius: 0 0 0.5rem 0.5rem;
max-height: 200px;
overflow-y: auto;
z-index: 10;
display: none;
}
.country-dropdown.show {
display: block;
}
.country-option {
display: flex;
align-items: center;
padding: 0.5rem;
cursor: pointer;
}
.country-option:hover {
background-color: #f3f4f6;
}
.success-animation {
animation: successPulse 0.6s ease-in-out;
}
@keyframes successPulse {
0% {
transform: scale(1);
}
50% {
transform: scale(1.1);
}
100% {
transform: scale(1);
}
}
.shake {
animation: shake 0.5s;
}
@keyframes shake {
0%, 100% {
transform: translateX(0);
}
10%, 30%, 50%, 70%, 90% {
transform: translateX(-5px);
}
20%, 40%, 60%, 80% {
transform: translateX(5px);
}
}
.tab-active {
border-bottom: 3px solid #00b4d8;
color: #00b4d8;
}
.lazy-load {
opacity: 0;
transition: opacity 0.3s;
}
.lazy-load.loaded {
opacity: 1;
}
.transaction-history-table {
width: 100%;
border-collapse: collapse;
}
.transaction-history-table th,
.transaction-history-table td {
padding: 12px 15px;
text-align: left;
border-bottom: 1px solid #e5e7eb;
}
.transaction-history-table th {
background-color: #f9fafb;
font-weight: 600;
color: #374151;
font-size: 0.875rem;
text-transform: uppercase;
letter-spacing: 0.05em;
}
.transaction-history-table tbody tr:hover {
background-color: #f9fafb;
}
.status-badge {
display: inline-flex;
align-items: center;
padding: 0.25rem 0.75rem;
border-radius: 9999px;
font-size: 0.75rem;
font-weight: 600;
}
.status-pending {
background-color: #fef3c7;
color: #92400e;
}
.status-cek {
background-color: #dbeafe;
color: #1e40af;
}
.status-proses {
background-color: #bfdbfe;
color: #1d4ed8;
}
.status-completed {
background-color: #d1fae5;
color: #065f46;
}
.status-failed {
background-color: #fee2e2;
color: #991b1b;
}
</style>
</head>
<body class="bg-gray-50">
<header class="bg-white shadow-sm sticky top-0 z-50">
<div class="container mx-auto px-4 py-4">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-4">
<div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center">
<i class="fas fa-gamepad text-white text-xl"></i>
</div>
<h1 class="text-2xl font-bold text-gray-800">Robux Top Up</h1>
</div>
<nav class="hidden md:flex items-center space-x-6">
<a href="#" class="text-gray-600 hover:text-blue-600 transition">Beranda</a>
<a href="#" onclick="showHowToTopUp()" class="text-gray-600 hover:text-blue-600 transition cursor-pointer">Cara Top Up</a>
<a href="#" onclick="showHelp()" class="text-gray-600 hover:text-blue-600 transition cursor-pointer">Bantuan</a>
<div class="relative">
<button onclick="toggleLanguageDropdown()" class="flex items-center text-gray-600 hover:text-blue-600 transition">
<i class="fas fa-globe mr-1"></i>
<span id="currentLang">ID</span>
<i class="fas fa-chevron-down text-xs ml-1"></i>
</button>
<div id="languageDropdown" class="absolute right-0 mt-2 w-32 bg-white rounded-md shadow-lg py-1 z-10 hidden">
<a href="#" onclick="changeLanguage('id')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Indonesia</a>
<a href="#" onclick="changeLanguage('en')" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">English</a>
</div>
</div>
<button class="bg-blue-600 
text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
<i class="fas fa-user mr-2"></i>Masuk
</button>
</nav>
<button class="md:hidden text-gray-600" onclick="toggleMobileMenu()">
<i class="fas fa-bars text-2xl"></i>
</button>
</div>
</div>
</header>
<div id="mobileMenu" class="hidden bg-white shadow-lg md:hidden">
<div class="container mx-auto px-4 py-4 space-y-3">
<a href="#" class="block text-gray-600 hover:text-blue-600 transition">Beranda</a>
<a href="#" onclick="showHowToTopUp()" class="block text-gray-600 hover:text-blue-600 transition cursor-pointer">Cara Top Up</a>
<a href="#" onclick="showHelp()" class="block text-gray-600 hover:text-blue-600 transition cursor-pointer">Bantuan</a>
<div class="flex items-center justify-between">
<span class="text-gray-600">Bahasa:</span>
<select onchange="changeLanguage(this.value)" class="bg-gray-100 rounded px-2 py-1">
<option value="id">Indonesia</option>
<option value="en">English</option>
</select>
</div>
<button class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
<i class="fas fa-user mr-2"></i>Masuk
</button>
</div>
</div>
<section class="gradient-bg text-white py-16">
<div class="container mx-auto px-4">
<div class="text-center">
<h2 class="text-4xl md:text-5xl font-bold mb-4" data-i18n="hero.title">
Top Up Robux dengan Mudah
</h2>
<p class="text-xl mb-8 opacity-90" data-i18n="hero.subtitle">
Platform resmi untuk pembelian Robux aman dan 
cepat
</p>
<div class="flex justify-center space-x-4">
<div class="bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3">
<i class="fas fa-shield-alt mr-2"></i><span data-i18n="hero.secure">100% Aman</span>
</div>
<div class="bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3">
<i class="fas fa-bolt mr-2"></i><span data-i18n="hero.fast">Proses Cepat</span>
</div>
<div class="bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3">
<i class="fas fa-headset mr-2"></i><span data-i18n="hero.support">Support 24/7</span>
</div>
</div>
</div>
</div>
</section>
<main class="container mx-auto px-4 py-12">
<div class="grid lg:grid-cols-3 gap-8">
<div class="lg:col-span-2">
<div class="bg-white rounded-xl shadow-lg p-6">
<h3 class="text-2xl font-bold text-gray-800 mb-6" data-i18n="package.title">
Pilih Paket Robux
</h3>
<div class="mb-6">
<label class="block text-sm font-medium text-gray-700 mb-2">
<i class="fas fa-user mr-2"></i><span data-i18n="form.username">Username Roblox</span>
</label>
<input
type="text"
id="username"
placeholder="Masukkan username Roblox Anda"
class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
data-i18n-placeholder="form.usernamePlaceholder"
/>
<p id="usernameError" class="text-red-500 text-xs mt-1 hidden" data-i18n="form.usernameError">
Username harus 3-20 karakter dan hanya berisi huruf, 
angka, dan underscore (_)
</p>
</div>
<div class="mb-6">
<label class="block text-sm font-medium text-gray-700 mb-2">
<i class="fas fa-phone mr-2"></i><span data-i18n="form.phone">Nomor HP</span>
</label>
<div class="flex">
<div class="country-select">
<div class="flex items-center justify-center px-4 border border-r-0 border-gray-300 rounded-l-lg bg-gray-50 cursor-pointer" onclick="toggleCountryDropdown()">
<span id="countryFlag" class="mr-2">ðŸ‡®ðŸ‡©</span>
<span id="countryCode" class="text-gray-600">+62</span>
<i class="fas fa-chevron-down text-gray-600 ml-2"></i>
</div>
<div id="countryDropdown" class="country-dropdown">
<div class="country-option" onclick="selectCountry('ðŸ‡®ðŸ‡©', '+62', 'Indonesia')">
<span class="mr-2">ðŸ‡®ðŸ‡©</span>
<span>+62</span>
<span class="ml-2 text-gray-600">Indonesia</span>
</div>
<div class="country-option" onclick="selectCountry('ðŸ‡²ðŸ‡¾', '+60', 'Malaysia')">
<span class="mr-2">ðŸ‡²ðŸ‡¾</span>
<span>+60</span>
<span class="ml-2 text-gray-600">Malaysia</span>
</div>
<div class="country-option" onclick="selectCountry('ðŸ‡¸ðŸ‡¬', '+65', 'Singapura')">
<span class="mr-2">ðŸ‡¸ðŸ‡¬</span>
<span>+65</span>
<span class="ml-2 text-gray-600">Singapura</span>
</div>
<div class="country-option" onclick="selectCountry('ðŸ‡¹ðŸ‡­', '+66', 'Thailand')">
<span class="mr-2">ðŸ‡¹ðŸ‡­</span>
<span>+66</span>
<span class="ml-2 text-gray-600">Thailand</span>
</div>
<div class="country-option" onclick="selectCountry('ðŸ‡»ðŸ‡³', '+84', 'Vietnam')">
<span class="mr-2">ðŸ‡»ðŸ‡³</span>
<span>+84</span>
<span class="ml-2 text-gray-600">Vietnam</span>
</div>
<div class="country-option" onclick="selectCountry('ðŸ‡µðŸ‡­', '+63', 'Filipina')">
<span class="mr-2">ðŸ‡µðŸ‡­</span>
<span>+63</span>
<span class="ml-2 text-gray-600">Filipina</span>
</div>
<div class="country-option" onclick="selectCountry('ðŸ‡ºðŸ‡¸', '+1', 'Amerika Serikat')">
<span class="mr-2">ðŸ‡ºðŸ‡¸</span>
<span>+1</span>
<span class="ml-2 text-gray-600">Amerika Serikat</span>
</div>
</div>
</div>
<input
type="tel"
id="phoneNumber"
placeholder="81234567890"
class="flex-1 px-4 py-3 border border-gray-300 rounded-r-lg focus:ring-2 focus:ring-blue-500 
focus:border-transparent"
data-i18n-placeholder="form.phonePlaceholder"
/>
</div>
<p id="phoneError" class="text-red-500 text-xs mt-1 hidden" data-i18n="form.phoneError">
Nomor HP tidak valid. Jangan masukkan kode negara di depan.
</p>
<p class="text-xs text-gray-500 mt-1" data-i18n="form.phoneNote">
Nomor HP Anda akan digunakan untuk konfirmasi pembelian
</p>
</div>
<div class="mb-6">
<label class="block text-sm font-medium text-gray-700 mb-2">
<i class="fas fa-tag mr-2"></i><span data-i18n="form.referral">Kode Referral (Opsional)</span>
</label>
<input
type="text"
id="referralCode"
placeholder="Masukkan kode referral"
class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
data-i18n-placeholder="form.referralPlaceholder"
/>
<p class="text-xs text-gray-500 mt-1" data-i18n="form.referralNote">
Masukkan kode referral untuk mendapatkan bonus tambahan
</p>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<div class="robux-card bg-white border-2 border-gray-200 rounded-xl p-6 relative" onclick="selectPackage(1, '50 Robux', 7200)">
<div class="bonus-tag" data-i18n="package.bonus15">Bonus 15%</div>
<div class="flex justify-between items-start mb-4">
<div>
<h4 class="text-xl font-bold text-gray-800">50 Robux</h4>
<p class="text-sm text-gray-600" data-i18n="package.mini">Paket Mini</p>
</div>
<div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center float-animation">
<i class="fas fa-coins text-green-600 text-xl"></i>
</div>
</div>
<div class="flex justify-between items-center">
<span class="text-2xl 
font-bold text-gray-800">Rp 7.200</span>
<span class="text-sm text-green-600 font-medium" data-i18n="package.save20">Hemat 20%</span>
</div>
</div>
<div class="robux-card bg-white border-2 border-gray-200 rounded-xl p-6 relative" onclick="selectPackage(2, '100 Robux', 14400)">
<div class="bonus-tag" data-i18n="package.bonus20">Bonus 20%</div>
<div class="flex justify-between items-start mb-4">
<div>
<h4 class="text-xl font-bold text-gray-800">100 Robux</h4>
<p class="text-sm text-gray-600" data-i18n="package.popular">Paket Popular</p>
</div>
<div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center float-animation">
<i class="fas fa-gem text-blue-600 text-xl"></i>
</div>
</div>
<div class="flex justify-between items-center">
<span class="text-2xl font-bold text-gray-800">Rp 14.400</span>
<span class="text-sm text-green-600 font-medium" data-i18n="package.save20">Hemat 20%</span>
</div>
</div>
<div class="robux-card bg-white border-2 border-gray-200 rounded-xl p-6 relative" onclick="selectPackage(3, '150 Robux', 21600)">
<div class="bonus-tag" data-i18n="package.bonus25">Bonus 25%</div>
<div class="flex justify-between items-start mb-4">
<div>
<h4 class="text-xl font-bold text-gray-800">150 Robux</h4>
<p class="text-sm text-gray-600" data-i18n="package.value">Paket Value</p>
</div>
<div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center float-animation">
<i class="fas fa-crown text-purple-600 text-xl"></i>
</div>
</div>
<div 
class="flex justify-between items-center">
<span class="text-2xl font-bold text-gray-800">Rp 21.600</span>
<span class="text-sm text-green-600 font-medium" data-i18n="package.save20">Hemat 20%</span>
</div>
</div>
<div class="robux-card bg-white border-2 border-gray-200 rounded-xl p-6 relative" onclick="selectPackage(4, '200 Robux', 28800)">
<div class="bonus-tag" data-i18n="package.bonus30">Bonus 30%</div>
<div class="flex justify-between items-start mb-4">
<div>
<h4 class="text-xl font-bold text-gray-800">200 Robux</h4>
<p class="text-sm text-gray-600" data-i18n="package.premium">Paket Premium</p>
</div>
<div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center float-animation">
<i class="fas fa-star text-yellow-600 text-xl"></i>
</div>
</div>
<div class="flex justify-between items-center">
<span class="text-2xl font-bold text-gray-800">Rp 28.800</span>
<span class="text-sm text-green-600 font-medium" data-i18n="package.save20">Hemat 20%</span>
</div>
</div>
</div>
<div class="border-t pt-6">
<h4 class="text-lg font-semibold text-gray-800 mb-4" data-i18n="package.customTitle">
Atau Masukkan Jumlah Custom (Minimal 50 Robux)
</h4>
<div class="relative">
<input
type="number"
id="customAmount"
placeholder="Masukkan jumlah Robux"
min="50"
class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
data-i18n-placeholder="package.customPlaceholder"
oninput="calculateCustom()"
/>
<div id="customPrice" class="mt-3 text-lg font-medium text-blue-600 hidden">
Harga: <span id="customPriceValue">Rp 0</span>
</div>
</div>
</div>
</div>
</div>
<div class="lg:col-span-1">
<div class="bg-white rounded-xl shadow-lg p-6 sticky top-24">
<h3 class="text-xl font-bold text-gray-800 mb-6" data-i18n="summary.title">
Ringkasan Pembayaran
</h3>
<div class="bg-gray-50 rounded-lg p-4 mb-6">
<div class="flex justify-between items-center mb-2">
<span class="text-gray-600" data-i18n="summary.username">Username:</span>
<span id="displayUsername" class="font-semibold text-gray-800">-</span>
</div>
<div class="flex justify-between items-center">
<span class="text-gray-600" data-i18n="summary.phone">Nomor HP:</span>
<span id="displayPhone" class="font-semibold text-gray-800">-</span>
</div>
</div>
<div class="bg-gray-50 rounded-lg p-4 mb-6">
<div class="flex justify-between items-center mb-2">
<span class="text-gray-600" data-i18n="summary.package">Paket Terpilih:</span>
<span id="selectedPackage" class="font-semibold text-gray-800">-</span>
</div>
<div class="flex justify-between items-center">
<span class="text-gray-600" data-i18n="summary.robux">Jumlah Robux:</span>
<span id="selectedRobux" class="font-semibold text-green-600">-</span>
</div>
</div>
<div class="bg-blue-50 rounded-lg p-4 mb-6">
<div class="flex justify-between items-center mb-2">
<div class="flex items-center">
<span class="text-gray-700 font-medium" data-i18n="summary.gamepass">Gamepass yang harus dibuat:</span>
<div class="info-tooltip ml-2">
<i class="fas fa-info-circle text-blue-500"></i>
<span class="tooltiptext" data-i18n="summary.gamepassTooltip">
Roblox mengambil pajak ~30% dari 
setiap pembelian. Jumlah ini sudah dihitung agar Anda mendapatkan Robux sesuai yang dibeli.
</span>
</div>
</div>
</div>
<div class="flex justify-between items-center">
<span id="gamepassAmount" class="font-bold text-blue-700">-</span>
<span id="robuxAfterTax" class="font-semibold text-green-600"></span>
</div>
<div class="mt-2 text-xs text-gray-600">
<span id="taxInfo"></span>
</div>
</div>
<div id="referralBonus" class="bg-green-50 rounded-lg p-4 mb-6 hidden">
<div class="flex justify-between items-center">
<span class="text-gray-700 font-medium" data-i18n="summary.referralBonus">Bonus Referral:</span>
<span id="referralAmount" class="font-semibold text-green-600">-</span>
</div>
</div>
<div class="mb-6">
<h4 class="text-lg font-semibold text-gray-800 mb-4" data-i18n="payment.title">
Metode Pembayaran
</h4>
<div class="space-y-3">
<div class="payment-method border-2 border-gray-200 rounded-lg p-4 cursor-pointer" onclick="selectPayment('qris')">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-3">
<i class="fas fa-qrcode text-2xl text-blue-600"></i>
<div>
<p class="font-medium text-gray-800">QRIS</p>
<p class="text-sm text-gray-600">GoPay, OVO, Dana, dll</p>
</div>
</div>
<i class="fas fa-check-circle text-green-500 hidden payment-check"></i>
</div>
</div>
<div class="payment-method border-2 border-gray-200 rounded-lg p-4 cursor-pointer" onclick="selectPayment('bank')">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-3">
<i class="fas fa-university text-2xl text-green-600"></i>
<div>
<p class="font-medium text-gray-800" data-i18n="payment.bank">Transfer Bank</p>
<p class="text-sm text-gray-600">BCA, Mandiri, BNI, BRI</p>
</div>
</div>
<i class="fas 
fa-check-circle text-green-500 hidden payment-check"></i>
</div>
</div>
<div class="payment-method border-2 border-gray-200 rounded-lg p-4 cursor-pointer" onclick="selectPayment('ewallet')">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-3">
<i class="fas fa-wallet text-2xl text-purple-600"></i>
<div>
<p class="font-medium text-gray-800" data-i18n="payment.ewallet">E-Wallet</p>
<p class="text-sm text-gray-600">OVO, GoPay, Dana, ShopeePay</p>
</div>
</div>
<i class="fas fa-check-circle text-green-500 hidden payment-check"></i>
</div>
</div>
</div>
</div>
<div class="border-t pt-4 mb-6">
<div class="flex justify-between items-center mb-2">
<span class="text-gray-600" data-i18n="payment.subtotal">Subtotal:</span>
<span id="subtotal" class="font-medium">Rp 0</span>
</div>
<div class="flex justify-between items-center mb-2">
<span class="text-gray-600" data-i18n="payment.adminFee">Admin Fee:</span>
<span class="font-medium">Rp 0</span>
</div>
<div class="flex justify-between items-center text-lg font-bold">
<span data-i18n="payment.total">Total:</span>
<span id="totalPayment" class="text-blue-600">Rp 0</span>
</div>
</div>
<button id="checkoutBtn" onclick="processCheckout()" disabled class="w-full bg-gray-400 text-white py-4 rounded-lg font-semibold text-lg transition disabled:cursor-not-allowed">
<i class="fas fa-lock mr-2"></i><span data-i18n="payment.checkout">Lanjutkan Pembayaran</span>
</button>
<div class="mt-6 text-center">
<p class="text-sm text-gray-600">
<i class="fas fa-shield-alt text-green-600 mr-2"></i>
<span data-i18n="payment.secure">Pembayaran aman 
dan terenkripsi</span>
</p>
</div>
</div>
</div>
</main>
<section class="bg-gray-100 py-12 mt-12">
<div class="container mx-auto px-4">
<h3 class="text-3xl font-bold text-center text-gray-800 mb-8" data-i18n="features.title">
Mengapa Memilih Kami?
</h3>
<div class="grid md:grid-cols-4 gap-6">
<div class="text-center">
<div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="fas fa-bolt text-blue-600 text-2xl"></i>
</div>
<h4 class="font-semibold text-gray-800 mb-2" data-i18n="features.fast">Proses Cepat</h4>
<p class="text-sm text-gray-600" data-i18n="features.fastDesc">Robux masuk dalam hitungan menit</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="fas fa-check-circle text-green-600 text-2xl"></i>
</div>
<h4 class="font-semibold text-gray-800 mb-2" data-i18n="features.legal">100% Legal</h4>
<p class="text-sm text-gray-600" data-i18n="features.legalDesc">Platform resmi dan terpercaya</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="fas fa-headset text-purple-600 text-2xl"></i>
</div>
<h4 class="font-semibold text-gray-800 mb-2" data-i18n="features.support">Support 24/7</h4>
<p class="text-sm text-gray-600">jika memesan malam lebih 
dari jam 09.00 akan di proses besok 11.00-12.00</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="fas fa-gift text-yellow-600 text-2xl"></i>
</div>
<h4 class="font-semibold text-gray-800 mb-2" data-i18n="features.bonus">Bonus Menarik</h4>
<p class="text-sm text-gray-600" data-i18n="features.bonusDesc">Dapatkan bonus setiap pembelian</p>
</div>
</div>
</div>
</section>
<section class="container mx-auto px-4 py-8">
<div class="bg-white rounded-xl shadow-lg p-6">
<div class="flex justify-between items-center mb-6">
<h3 class="text-xl font-bold text-gray-800" data-i18n="history.title">Riwayat Transaksi</h3>
<button onclick="refreshTransactionHistory()" class="text-blue-600 hover:text-blue-800 transition">
<i class="fas fa-sync-alt mr-1"></i><span data-i18n="history.refresh">Refresh</span>
</button>
</div>
<div id="transactionHistoryTable" class="overflow-x-auto">
<table class="transaction-history-table">
<thead>
<tr>
<th data-i18n="history.id">ID Transaksi</th>
<th data-i18n="history.date">Tanggal</th>
<th data-i18n="history.robux">Jumlah Robux</th>
<th data-i18n="history.status">Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>#20230901-001</td>
<td>01 Sep 2023</td>
<td>100 Robux</td>
<td><span class="status-badge status-completed">Completed</span></td>
</tr>
<tr>
<td>#20230901-002</td>
<td>01 Sep 2023</td>
<td>50 Robux</td>
<td><span class="status-badge status-proses">Processing</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<footer class="bg-gray-800 text-white py-8 mt-12">
<div class="container mx-auto px-4 text-center">
<p class="text-sm">
&copy; 2024 Robux Top Up - Platform Resmi. All rights reserved.
</p>
</div>
</footer>
<script>
// =======================================================
// ADDED: FIREBASE CONFIGURATION
// SILAHKAN GANTI DENGAN DETAIL FIREBASE ANDA
// =======================================================
const firebaseConfig = {
    apiKey: "YOUR_AAIzaSyBP-BfH2y4PnhDR4x0WZceIcu_AA2EKSO4", // Ganti dengan kunci API Anda
    authDomain: "marstorekita-storebase.firebaseapp.com", // Ganti dengan Auth Domain Anda
    projectId: "marstorekita-storebase", // Ganti dengan ID Proyek Anda
    storageBucket: "marstorekita-storebase.firebasestorage.app",
    messagingSenderId: "655700298665",
    appId: "Y1:655700298665:web:ae6c703ba545283c2152b8"
};

// Inisialisasi Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const TRANSACTIONS_COLLECTION = 'transactions'; // Nama koleksi di Firestore

// =======================================================
// CORE LOGIC & VARIABLES
// =======================================================
let selectedPackageData = null; // { id: 1, name: '50 Robux', netRobux: 50, price: 7200 }
let selectedPaymentMethod = null;
let currentCountryCode = '+62';
let currentCountryFlag = 'ðŸ‡®ðŸ‡©';

// =======================================================
// UTILITY FUNCTIONS
// =======================================================

// Fungsi Reverse Calculation (Net Robux -> Gamepass Price)
function calculateGamepassPrice(netRobux) {
    if (netRobux <= 0) return 0;
    // Formula: Gamepass_Price = ceil(Net_Robux / 0.70)
    // Pembagian 0.70 karena Roblox mengambil 30% pajak.
    return Math.ceil(netRobux / 0.70);
}

function formatRupiah(number) {
    if (isNaN(number) || number === null) return 'Rp 0';
    return 'Rp ' + number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

function formatRobuxAmount(packageName) {
    return parseInt(packageName.replace(' Robux', '').trim());
}

// =======================================================
// UPDATE UI FUNCTIONS
// =======================================================

function updateSummary() {
    const username = document.getElementById('username').value.trim();
    const phone = document.getElementById('phoneNumber').value.trim();

    // Update User Info
    document.getElementById('displayUsername').textContent = username || '-';
    document.getElementById('displayPhone').textContent = (currentCountryCode + phone) || '-';

    if (!selectedPackageData) {
        document.getElementById('selectedPackage').textContent = '-';
        document.getElementById('selectedRobux').textContent = '-';
        document.getElementById('subtotal').textContent = 'Rp 0';
        document.getElementById('totalPayment').textContent = 'Rp 0';
        document.getElementById('gamepassAmount').textContent = '-';
        document.getElementById('robuxAfterTax').textContent = '';
        document.getElementById('taxInfo').textContent = '';
        return;
    }

    const netRobux = selectedPackageData.netRobux;
    const price = selectedPackageData.price;
    const grossGamepassPrice = calculateGamepassPrice(netRobux);
    const robuxReceivedBySeller = Math.floor(grossGamepassPrice * 0.70); // Harus sama dengan netRobux

    // Update Selected Package
    document.getElementById('selectedPackage').textContent = selectedPackageData.name;
    document.getElementById('selectedRobux').textContent = `${netRobux} Robux`;

    // Update Payment Totals (assuming admin fee is Rp 0 for now)
    document.getElementById('subtotal').textContent = formatRupiah(price);
    document.getElementById('totalPayment').textContent = formatRupiah(price);

    // Update Gamepass Calculator
    document.getElementById('gamepassAmount').textContent = `${grossGamepassPrice} Robux`;
    
    // Teks konfirmasi Robux bersih yang akan diterima pengguna
    document.getElementById('robuxAfterTax').textContent = `(Net: ${netRobux} Robux)`;
    
    // Teks informasi pajak
    const taxDeducted = grossGamepassPrice - robuxReceivedBySeller;
    const taxRate = (taxDeducted / grossGamepassPrice * 100).toFixed(0);
    document.getElementById('taxInfo').textContent = `Roblox akan memotong ${taxDeducted} Robux (${taxRate}% tax) dari harga ${grossGamepassPrice} Robux.`;

    // Check for validation
    validateForm();
}

function validateForm() {
    const username = document.getElementById('username').value.trim();
    const phone = document.getElementById('phoneNumber').value.trim();
    const checkoutBtn = document.getElementById('checkoutBtn');

    const isUsernameValid = username.length >= 3 && username.length <= 20;
    const isPhoneValid = phone.length >= 8;
    const isPackageSelected = selectedPackageData !== null;
    const isPaymentSelected = selectedPaymentMethod !== null;

    // Show/Hide Errors
    document.getElementById('usernameError').classList.toggle('hidden', isUsernameValid);
    document.getElementById('phoneError').classList.toggle('hidden', isPhoneValid);

    // Enable/Disable Checkout Button
    if (isUsernameValid && isPhoneValid && isPackageSelected && isPaymentSelected) {
        checkoutBtn.disabled = false;
        checkoutBtn.classList.remove('bg-gray-400');
        checkoutBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
    } else {
        checkoutBtn.disabled = true;
        checkoutBtn.classList.add('bg-gray-400');
        checkoutBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
    }
}

// =======================================================
// EVENT HANDLERS
// =======================================================

function selectPackage(id, name, price) {
    const robuxAmount = formatRobuxAmount(name);
    selectedPackageData = { id, name, netRobux: robuxAmount, price };

    // Remove 'selected' class from all cards
    document.querySelectorAll('.robux-card').forEach(card => {
        card.classList.remove('selected');
    });

    // Add 'selected' class to the clicked card
    const cardElement = document.querySelector(`.robux-card[onclick*='selectPackage(${id}']`);
    if (cardElement) {
        cardElement.classList.add('selected');
    }

    // Hide custom amount details
    document.getElementById('customAmount').value = '';
    document.getElementById('customPrice').classList.add('hidden');

    updateSummary();
}

function calculateCustom() {
    const input = document.getElementById('customAmount');
    let robuxAmount = parseInt(input.value);
    const minRobux = 50;
    const pricePerRobux = 144; // Example rate based on 100 Robux @ Rp 14.400

    if (isNaN(robuxAmount) || robuxAmount < minRobux) {
        selectedPackageData = null;
        document.getElementById('customPrice').classList.add('hidden');
        document.querySelectorAll('.robux-card').forEach(card => card.classList.remove('selected'));
    } else {
        // Calculate price based on the fixed rate for custom packages
        const customPrice = Math.round(robuxAmount * pricePerRobux);
        
        selectedPackageData = { 
            id: 0, 
            name: `${robuxAmount} Robux (Custom)`, 
            netRobux: robuxAmount, 
            price: customPrice 
        };

        // Update custom price display
        document.getElementById('customPriceValue').textContent = formatRupiah(customPrice);
        document.getElementById('customPrice').classList.remove('hidden');

        // Remove selection from predefined packages
        document.querySelectorAll('.robux-card').forEach(card => card.classList.remove('selected'));
    }

    updateSummary();
}

function selectPayment(method) {
    selectedPaymentMethod = method;

    document.querySelectorAll('.payment-method').forEach(el => {
        el.classList.remove('selected');
        el.querySelector('.payment-check').classList.add('hidden');
    });

    const selectedEl = document.querySelector(`.payment-method[onclick*='${method}']`);
    if (selectedEl) {
        selectedEl.classList.add('selected');
        selectedEl.querySelector('.payment-check').classList.remove('hidden');
    }

    validateForm();
}

// =======================================================
// FIREBASE CHECKOUT FUNCTION
// =======================================================

async function processCheckout() {
    if (!selectedPackageData || !selectedPaymentMethod || document.getElementById('checkoutBtn').disabled) {
        alert('Mohon lengkapi semua data dengan benar.');
        return;
    }
    
    // Data to be saved
    const username = document.getElementById('username').value.trim();
    const phoneNumber = document.getElementById('phoneNumber').value.trim();
    const referralCode = document.getElementById('referralCode').value.trim();
    
    // Reverse calculation data for gamepass creation
    const netRobux = selectedPackageData.netRobux;
    const grossGamepassPrice = calculateGamepassPrice(netRobux);

    const transactionData = {
        username: username,
        fullPhoneNumber: currentCountryCode + phoneNumber,
        referralCode: referralCode || null,
        package: selectedPackageData.name,
        netRobux: netRobux,
        grossGamepassPrice: grossGamepassPrice, // The price user must set for their gamepass
        totalPriceIDR: selectedPackageData.price,
        paymentMethod: selectedPaymentMethod,
        transactionStatus: 'Pending', // Initial status
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
    };
    
    document.getElementById('checkoutBtn').disabled = true;
    document.getElementById('checkoutBtn').innerHTML = '<i class="loading-spinner mr-2"></i> Memproses...';

    try {
        // Save to Firestore
        const docRef = await db.collection(TRANSACTIONS_COLLECTION).add(transactionData);
        
        alert(`Transaksi berhasil dibuat! ID: ${docRef.id}. Gamepass yang perlu dibuat: ${grossGamepassPrice} Robux. Silakan lanjutkan ke pembayaran.`);

        // Redirect or show success modal here
        // window.location.href = `/payment-status.html?id=${docRef.id}`;
        
    } catch (error) {
        console.error("Error adding document: ", error);
        alert('Terjadi kesalahan saat memproses transaksi. Silakan coba lagi.');
    } finally {
        document.getElementById('checkoutBtn').disabled = false;
        document.getElementById('checkoutBtn').innerHTML = '<i class="fas fa-lock mr-2"></i>Lanjutkan Pembayaran';
        // Force re-validation
        validateForm();
    }
}

// =======================================================
// UI/HELPER FUNCTIONS (Original from user file)
// =======================================================

function updateUserInfo() {
    updateSummary();
}

function checkReferralBonus() {
    // Mock referral check logic
    const referralCode = document.getElementById('referralCode').value.trim();
    const referralBonusDiv = document.getElementById('referralBonus');
    
    if (referralCode.length > 0) {
        // Mock: Assume valid if not empty
        referralBonusDiv.classList.remove('hidden');
        document.getElementById('referralAmount').textContent = 'Rp 1.000';
    } else {
        referralBonusDiv.classList.add('hidden');
    }
}

function toggleMobileMenu() {
    document.getElementById('mobileMenu').classList.toggle('hidden');
}

function toggleLanguageDropdown() {
    document.getElementById('languageDropdown').classList.toggle('hidden');
}

function changeLanguage(lang) {
    document.getElementById('currentLang').textContent = lang.toUpperCase();
    document.getElementById('languageDropdown').classList.add('hidden');
    // Implement actual i18n logic here
    console.log(`Language set to: ${lang}`);
}

function toggleCountryDropdown() {
    document.getElementById('countryDropdown').classList.toggle('show');
}

function selectCountry(flag, code, name) {
    currentCountryCode = code;
    currentCountryFlag = flag;
    document.getElementById('countryFlag').textContent = flag;
    document.getElementById('countryCode').textContent = code;
    document.getElementById('countryDropdown').classList.remove('show');
    updateUserInfo(); // Trigger summary update
}


// Event listeners for input validation and summary update
document.getElementById("customAmount").addEventListener("input", function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, "");
    if (parseInt(e.target.value) < 50) {
        e.target.value = 50;
    }
    calculateCustom();
});

document.getElementById("phoneNumber").addEventListener("input", function(e) {
    // Only allow numbers
    e.target.value = e.target.value.replace(/[^0-9]/g, "");
    // Limit to 13 digits
    if (e.target.value.length > 13) {
        e.target.value = e.target.value.slice(0, 13);
    }
    updateUserInfo();
});

document.getElementById("username").addEventListener("input", updateUserInfo);
document.getElementById("referralCode").addEventListener("input", function() {
    checkReferralBonus();
    validateForm();
});

// Close dropdowns when clicking outside
document.addEventListener("click", function(event) {
    const countrySelect = document.querySelector(".country-select");
    const countryDropdown = document.getElementById("countryDropdown");
    const languageDropdown = document.getElementById("languageDropdown");
    
    // Close Country Dropdown
    const countryButton = document.querySelector(".country-select > div");
    if (!countrySelect.contains(event.target) && !countryButton.contains(event.target)) {
        countryDropdown.classList.remove("show");
    }

    // Close Language Dropdown
    const langButton = document.querySelector(".relative button");
    if (!event.target.closest('#languageDropdown') && langButton && !langButton.contains(event.target)) {
        languageDropdown.classList.add("hidden");
    }
});

// Mock functions for other non-implemented features
function showHowToTopUp() { alert('Fitur Cara Top Up belum diimplementasikan.'); }
function showHelp() { alert('Fitur Bantuan belum diimplementasikan.'); }
function refreshTransactionHistory() { alert('Fitur Refresh Riwayat Transaksi belum diimplementasikan.'); }
</script>
</body>
</html>